package dev.cammiescorner.arcanuscontinuum.common.command;

import com.mojang.brigadier.builder.LiteralArgumentBuilder;
import com.mojang.brigadier.context.CommandContext;
import com.mojang.brigadier.exceptions.CommandSyntaxException;
import dev.cammiescorner.arcanuscontinuum.common.command.pocketdimension.ExportPocketDimensionCommand;
import dev.cammiescorner.arcanuscontinuum.common.command.pocketdimension.RegeneratePocketDimensionCommand;
import net.minecraft.command.argument.EntityArgumentType;
import net.minecraft.server.command.CommandManager;
import net.minecraft.server.command.ServerCommandSource;

import java.util.UUID;

public class PocketDimensionCommand {

	public static void register(LiteralArgumentBuilder<ServerCommandSource> builder) {
		var cmdRoot = CommandManager.argument("player", EntityArgumentType.player());
		ExportPocketDimensionCommand.register(cmdRoot);
		RegeneratePocketDimensionCommand.register(cmdRoot);
		builder.then(CommandManager.literal("pocket_dimension").then(cmdRoot));
	}

	public static UUID getPlayerId(CommandContext<ServerCommandSource> context) throws CommandSyntaxException {
		return EntityArgumentType.getPlayer(context, "player").getGameProfile().getId();
	}
}
